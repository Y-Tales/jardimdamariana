const flores = [
  {
    semana: 1,
    nome: "Girassol",
    imagem: "assets/flores/girassol.jpeg",
    frase: `
Você ilumina até os dias mais quentes,
como um sol que escolhe permanecer.
No meio do caos, você cresce diferente,
ensinando o mundo inteiro a florescer.

Seu riso abre manhãs silenciosas,
seu jeito acalma o que arde em mim.
Mesmo quando as horas são densas e duras,
você insiste em fazer tudo ter fim.

Se amar é girar em torno da luz,
então é em você que eu sei morar.
Porque até no verão mais intenso,

entre todos os sóis que eu já vi surgir,
é o seu calor que escolhe ficar
quando o dia resolve partir.
`
  },
  {
    semana: 2,
    nome: "Hibisco",
    imagem: "assets/flores/hibisco.jpeg",
    frase: `
Tudo em você é força que floresce,
vermelho vivo em meio ao que é comum;
não há silêncio onde a sua voz cresce,
nem sombra onde se espalha o seu perfume.

Seu gesto é chama clara, intensa e bela,
não pede calma, ensina a pulsação;
em cada passo, o mundo se revela
mais quente, mais aberto à sensação.

Se amar é aceitar o excesso em flor,
é não temer o fogo que conduz;
é ver beleza até na própria dor.

Então que eu fique onde mora o ardor,
pois entre tantas formas de luz,
é sua intensidade que me seduz.
`
  },
  {
    semana: 3,
    nome: "Helicônia",
    imagem: "assets/flores/heliconia.jpeg",
    frase: `
Você não passa nunca despercebida,
há cor em seu silêncio e no olhar.
Onde você está, a cena é decidida,
pois tudo ao redor começa a mudar.

Seu passo rompe o óbvio do caminho,
não pede licença, ensina presença;
há força viva em cada detalhe mínimo,
há forma exata no excesso e na crença.

Se existir é deixar rastro no chão,
você escreve o mundo ao caminhar;
não há distração que vença sua ação.

E mesmo quando tenta se ocultar,
entre tantas flores da estação,
é você que o olhar escolhe encontrar.
`
  },
  {
    semana: 4,
    nome: "Ixora",
    imagem: "assets/flores/ixora.jpeg",
    frase: `
Beleza não se esconde no isolado,
mas vive onde os detalhes sabem ser;
no gesto simples, firme e alinhado,
no todo que se aprende a perceber.

Não é uma cor sozinha que convence,
nem forma única a se sustentar;
é o encontro onde cada parte vence
o medo de apenas se mostrar.

Se amar é ver sentido no conjunto,
é aceitar o laço entre o que há;
é dar valor ao agora e ao junto.

Assim você me ensina, sem falar:
entre tantas coisas num só assunto,
é na união que a beleza está.
`
  },
  {
    semana: 5,
    nome: "Alamanda",
    imagem: "assets/flores/alamanda.jpeg",
    frase: `
Sua presença espalha energia,
como o sol que acorda o que dormia;
por onde passa, o ar se renova,
e o dia encontra forma mais nova.

Não há espaço onde você não alcance,
seu rastro é claro, vivo, natural;
há movimento em cada simples lance,
há luz que nasce do gesto casual.

Se existir é sempre provocar ação,
você ensina o mundo a se mover;
transforma o pouco em expansão.

E mesmo sem tentar aparecer,
entre tantos corpos na multidão,
é sua força que faz tudo viver.
`
  },
  {
    semana: 6,
    nome: "Bougainvillea",
    imagem: "assets/flores/bougainvillea.jpeg",
    frase: `
Quando você aparece, o mundo muda,
as cores ganham força e direção;
o cinza cede espaço, a luz se inunda,
e o dia aprende nova expressão.

Seu riso pinta o ar de movimento,
seu gesto espalha tons pelo lugar;
há vida em cada mínimo momento
que a sua presença faz brotar.

Se amar é ver o mundo em outra cor,
é aceitar o brilho que conduz;
é permitir-se ver além do amor.

Então que eu fique onde nasce a luz,
pois entre tantas formas de esplendor,
é você quem colore o que reluz.
`
  },
  {
    semana: 7,
    nome: "Lótus Tropical",
    imagem: "assets/flores/lotus.jpeg",
    frase: `
Mesmo no calor, você é calma,
como a água quieta em pleno verão;
há paz que nasce onde mora a sua alma,
há leveza firme em cada ação.

O mundo ferve, corre e se apressa,
mas em você o tempo aprende a ficar;
seu gesto ensina, sem qualquer pressa,
que até o fogo pode descansar.

Se amar é não temer a contradição,
é ser abrigo mesmo em plena luz;
é ser silêncio em meio à tensão.

Então que eu fique onde a calma conduz,
pois entre tanta chama e agitação,
é sua paz que o meu caos reduz.
`
  },
  {
    semana: 8,
    nome: "Jasmim-manga",
    imagem: "assets/flores/jasmim_manga.jpeg",
    frase: `
Há delicadeza em tudo o que você é,
como perfume leve que insiste em ficar;
não grita, não pesa, mas ninguém ignora
o rastro suave que aprende a marcar.

Seu toque é gesto que não se impõe,
mas muda o rumo de quem se aproxima;
há força escondida no que não expõe,
há presença firme no que é mínima.

Se amar é sentir sem precisar provar,
é ser memória sem precisar do som;
é ser abrigo sem se anunciar.

Então que eu aprenda esse seu dom:
o de chegar leve, quase sem tocar,
e ainda assim nunca passar em vão.
`
  },
  {
    semana: 9,
    nome: "Flor-do-maracujá",
    imagem: "assets/flores/flor_maracuja.jpeg",
    frase: `
Em você, o encanto nunca é imediato,
vive nos traços que pedem atenção;
é no detalhe pequeno e quase abstrato
que mora inteira a sua definição.

Seu olhar guarda mapas escondidos,
seus gestos falam mais que qualquer som;
há mundos inteiros, bem contidos,
no simples jeito que você compõe o tom.

Se amar é aprender a observar,
é ir além do que salta aos olhos nus;
é entender que o essencial sabe esperar.

Então eu fico onde poucos veem luz,
pois é no detalhe, ao te olhar,
que mora tudo aquilo que te faz única.
`
  },
  {
    semana: 10,
    nome: "Dália Vibrante",
    imagem: "assets/flores/dalia.jpeg",
    frase: `
Em você, tudo tem camadas profundas,
como pétalas que se abrem ao sol;
há mistério que aos poucos se infunda,
e luz que revela o que o tempo rol.

Seu ser não se mostra num único plano,
há força, há ternura e sabedoria;
cada gesto seu é como um soberano
que governa com graça o dia a dia.

Se amar é enxergar além da superfície,
é tocar cada camada sem temor;
é compreender que tudo em você se deslize.

Então permaneço onde floresce o amor,
pois entre cores, formas e sua raiz,
é em você que habita toda a luz.
`
  },
  {
    semana: 11,
    nome: "Zínia",
    imagem: "assets/flores/zinia.jpeg",
    frase: `
Simplicidade revela grande força,
como rio manso que não deixa de fluir;
há firmeza calma em cada escolha tua,
e em teu jeito leve, o mundo a conduzir.

Não é o excesso que cativa e inspira,
mas a essência que se mostra sem temor;
há luz no silêncio, e em cada mira,
o coração aprende o que é puro amor.

Se amar é aceitar o que é natural,
é ver beleza no que é simples e sereno;
é reconhecer que tudo é essencial.

Então permaneço onde o simples é pleno,
pois entre gestos sutis e singela paz,
é a tua força que o meu mundo refaz.
`
  },
  {
    semana: 12,
    nome: "Cosmos",
    imagem: "assets/flores/cosmos.jpeg",
    frase: `
Leve, mas impossível de ignorar,
como estrela que brilha na imensidão;
há graça em tudo que você sabe mostrar,
e força sutil em cada pulsação.

Seu passo toca o mundo sem alarde,
seu riso dança leve pelo ar;
há encanto nos gestos, há arte
em saber se fazer presente sem pesar.

Se amar é sentir presença sem prender,
é flutuar junto sem perder direção;
é deixar o outro livre e ainda aquecer.

Então eu sigo onde mora a atração,
pois entre tantas luzes a cintilar,
é a sua leveza que me faz ficar.
`
  },
  {
    semana: 13,
    nome: "Gazânia",
    imagem: "assets/flores/gazania.jpeg",
    frase: `
Você floresce melhor quando é luz,
como jardim que brilha ao amanhecer;
há vida intensa em cada gesto seu,
e cores que ensinam o mundo a crescer.

Seu ser reflete o dia sem medo,
cada pétala exala força e calor;
há brilho constante mesmo no segredo,
há calor que transforma em puro amor.

Se amar é irradiar luz sem cessar,
é ser farol em mares de escuridão;
é ensinar o mundo inteiro a caminhar.

Então permaneço onde há essa clarão,
pois entre todas as flores a existir,
é a sua luz que me faz prosseguir.
`
  }
]

// Card interrogação fixo
const cardInterrogacao = {
  semana: "interrogacao",
  nome: "Próxima Flor",
  imagem: "assets/flores/interrogacao.jpeg",
  frase: `
Esta é a flor que ainda não foi revelada!
Cada semana, o carrossel libera uma nova flor
com seu cartão especial, e cada estação
traz flores e sonetos únicos para você.

O card de interrogação indica a próxima surpresa
que você vai descobrir.
`
}

// Semana atual
function getSemanaAtual() {
  const hoje = new Date()
  const inicio = new Date(hoje.getFullYear(), 0, 1)
  return Math.ceil((((hoje - inicio) / 86400000) + inicio.getDay() + 1) / 7)
}

const semanaAtual = getSemanaAtual()

// Cria array de cards: flores liberadas + card interrogação + futuras
const cards = []
flores.forEach(flor => {
  const isFutura = flor.semana > semanaAtual
  cards.push({ ...flor, isFutura })
})

// Posição do cardInterrogacao: logo após última liberada
let posUltimaLiberada = cards.findIndex(f => f.semana > semanaAtual)
if (posUltimaLiberada === -1) posUltimaLiberada = cards.length
cards.splice(posUltimaLiberada, 0, { ...cardInterrogacao, isFutura: false })

// Índice atual começa na semana atual ou último liberado
let indice = Math.min(semanaAtual - 1, cards.length - 1)

const container = document.getElementById("card-container")
const prev = document.getElementById("prev")
const next = document.getElementById("next")

function render() {
  container.innerHTML = ""

  const cardAtual = cards[indice]

  const card = document.createElement("div")
  card.className = "card"

  card.innerHTML = `
    <div class="face front">
      <img src="${cardAtual.isFutura ? "assets/flores/unknown.jpeg" : cardAtual.imagem}">
    </div>
    <div class="face back">
      <div>${cardAtual.frase}</div>
      ${cardAtual.semana !== "interrogacao" && !cardAtual.isFutura ? `<button id="flip">voltar</button>` : ""}
    </div>
  `

  container.appendChild(card)

  // Ativa flip para todos os cards liberados, incluindo o de interrogação
  if (!cardAtual.isFutura) {
    container.querySelector(".front").addEventListener("click", () => {
      card.classList.add("flipped")
    })

    // Botão voltar apenas se não for o card de interrogação
    const btn = container.querySelector("#flip")
    if (btn) {
      btn.addEventListener("click", () => {
        card.classList.remove("flipped")
      })
    } else {
      // Para o card de interrogação, clica em qualquer parte da back para voltar
      card.querySelector(".back").addEventListener("click", () => {
        card.classList.remove("flipped")
      })
    }
  }
}

prev.onclick = () => {
  if (indice > 0) {
    indice--
    render()
  }
}

next.onclick = () => {
  if (indice < cards.length - 1) {
    indice++
    render()
  }
}

// Clima
const clima = document.getElementById("clima")
const hora = new Date().getHours()
clima.innerHTML = ""

// Dia
if (hora >= 6 && hora < 18) {
  const sol = document.createElement("div")
  sol.className = "sol"
  clima.appendChild(sol)
}

// Noite
if (hora >= 18 || hora < 6) {
  const lua = document.createElement("div")
  lua.className = "lua"
  clima.appendChild(lua)
}

// Chuva leve (chance)
if (Math.random() > 0.6) {
  for (let i = 0; i < 40; i++) {
    const gota = document.createElement("div")
    gota.className = "gota"
    gota.style.left = Math.random() * 100 + "vw"
    gota.style.animationDelay = Math.random() + "s"
    clima.appendChild(gota)
  }
}

render()